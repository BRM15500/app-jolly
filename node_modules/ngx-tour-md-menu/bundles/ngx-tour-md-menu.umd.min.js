!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/core"),require("ngx-tour-core"),require("@angular/material"),require("withinviewport"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tour-md-menu",["exports","tslib","@angular/core","ngx-tour-core","@angular/material","withinviewport","rxjs/operators","@angular/common"],t):t(e["ngx-tour-md-menu"]={},e.tslib,e.ng.core,null,e.ng.material,null,e.Rx.Observable.prototype,e.ng.common)}(this,function(e,u,n,r,t,o,i,s){"use strict";o=o&&o.hasOwnProperty("default")?o["default"]:o;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.decorators=[{type:n.Injectable}],t}(r.TourService),p=function(){function e(){this.menu=new t.MatMenu(undefined,undefined,{xPosition:"after",yPosition:"below",overlapTrigger:!0,backdropClass:""})}return e.decorators=[{type:n.Component,args:[{selector:"tourAnchorOpener",styles:[":host { display: none; }"],template:'<span [matMenuTriggerFor]="menu" #trigger="matMenuTrigger"></span>'}]}],e.propDecorators={menu:[{type:n.Input}],trigger:[{type:n.ViewChild,args:[t.MatMenuTrigger]}]},e}(),c=function(){function e(){}return e.decorators=[{type:n.Injectable}],e}(),l=function(){function e(e){this.renderer=e.createRenderer(null,null)}return e.prototype.show=function(e){var t=e.nativeElement.getBoundingClientRect();this.backdropElement||(this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)),this.setStyles(t)},e.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},e.prototype.setStyles=function(e){var t,n,r={position:"fixed",width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px","box-shadow":"0 0 0 9999px rgba(0, 0, 0, 0.7)","z-index":"100"};try{for(var o=u.__values(Object.keys(r)),i=o.next();!i.done;i=o.next()){var s=i.value;this.renderer.setStyle(this.backdropElement,s,r[s])}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[{type:n.RendererFactory2}]},e}(),d=function(){function e(e,t,n,r,o,i,s){this.componentFactoryResolver=e,this.injector=t,this.viewContainer=n,this.element=r,this.tourService=o,this.tourStepTemplate=i,this.tourBackdrop=s,this.opener=this.viewContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(p)).instance}return e.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},e.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},e.prototype.showTourStep=function(e){var t=this;this.isActive=!0,(this.tourStepTemplate.templateComponent.step=e).preventScrolling||(o(this.element.nativeElement,{sides:"bottom"})?o(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1)),this.opener.trigger._element=this.element,this.opener.trigger.menu=this.tourStepTemplate.templateComponent.tourStep,this.opener.trigger.ngAfterContentInit(),this.opener.trigger.openMenu(),e.enableBackdrop?this.tourBackdrop.show(this.element):this.tourBackdrop.close(),e.prevBtnTitle=e.prevBtnTitle||"Prev",e.nextBtnTitle=e.nextBtnTitle||"Next",e.endBtnTitle=e.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.opener.trigger.menuClosed.pipe(i.first()).subscribe(function(){t.tourService.getStatus()!==r.TourState.OFF&&t.tourService.end(),t.tourBackdrop.close()})},e.prototype.hideTourStep=function(){this.isActive=!1,this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.opener.trigger.closeMenu(),this.tourService.getStatus()===r.TourState.OFF&&this.tourBackdrop.close()},e.decorators=[{type:n.Directive,args:[{selector:"[tourAnchor]"}]}],e.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:n.Injector},{type:n.ViewContainerRef},{type:n.ElementRef},{type:a},{type:c},{type:l}]},e.propDecorators={tourAnchor:[{type:n.Input}],isActive:[{type:n.HostBinding,args:["class.touranchor--is-active"]}]},e}(),m=function(r){function e(e,t){var n=r.call(this,t)||this;return n.tourStepTemplateService=e,n.tourService=t,n.step={},n}return u.__extends(e,r),e.prototype.ngAfterViewInit=function(){this.tourStepTemplateService.templateComponent=this},e.decorators=[{type:n.Component,args:[{selector:"tour-step-template",styles:["\n      ::ng-deep .tour-step .mat-menu-content { \n          padding: 0 !important; \n      }\n  "],template:'\n    <mat-menu [overlapTrigger]="false" class="tour-step">\n      <ng-container *ngTemplateOutlet="stepTemplate || defaultTemplate; context: { step: step }"></ng-container>\n    </mat-menu>\n    <ng-template #defaultTemplate let-step="step">\n      <mat-card (click)="$event.stopPropagation()">\n        <mat-card-title>\n          {{step?.title}}\n        </mat-card-title>\n        <mat-card-content>\n          {{step?.content}}\n        </mat-card-content>\n        <mat-card-actions>\n          <button mat-icon-button [disabled]="!tourService.hasPrev(step)" (click)="tourService.prev()">\n            <mat-icon>chevron_left</mat-icon>\n          </button>\n          <button mat-icon-button [disabled]="!tourService.hasNext(step)" (click)="tourService.next()">\n            <mat-icon>chevron_right</mat-icon>\n          </button>\n          <button mat-button (click)="tourService.end()">{{step?.endBtnTitle}}</button>\n        </mat-card-actions>\n      </mat-card>\n    </ng-template>\n  '}]}],e.ctorParameters=function(){return[{type:c},{type:a}]},e.propDecorators={tourStep:[{type:n.ViewChild,args:[t.MatMenu]}],stepTemplate:[{type:n.Input},{type:n.ContentChild,args:[n.TemplateRef]}]},e}(r.TourHotkeyListenerComponent),h=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:u.__spread([c,l],r.TourModule.forRoot().providers,[a])}},e.decorators=[{type:n.NgModule,args:[{declarations:[d,m,p],entryComponents:[p],exports:[d,m,r.TourModule],imports:[s.CommonModule,r.TourModule,t.MatMenuModule,t.MatCardModule,t.MatButtonModule,t.MatIconModule]}]}],e}();e.TourService=a,e.TourMatMenuModule=h,e.TourAnchorMatMenuDirective=d,e.TourStepTemplateComponent=m,e.ɵa=a,e.ɵd=p,e.ɵc=l,e.ɵb=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tour-md-menu.umd.min.js.map